<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>7. 睿Rui - 代码生成器 | MyBatis Mapper</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/favicon.png">
    <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?a05b63ee263e1ad37bf6c8966bfe92fa";
              var s = document.getElementsByTagName("script")[0]; 
              s.parentNode.insertBefore(hm, s);
            })();
        </script>
    <script crossorigin="anonymous" async="true" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1797264872895352"></script>
    <meta name="description" content="通用 Mapper">
    
    <link rel="preload" href="/assets/css/0.styles.4fd8ad1c.css" as="style"><link rel="preload" href="/assets/js/app.982d0a79.js" as="script"><link rel="preload" href="/assets/js/2.05c8fd45.js" as="script"><link rel="preload" href="/assets/js/16.3d121eed.js" as="script"><link rel="prefetch" href="/assets/js/10.a8bd79cb.js"><link rel="prefetch" href="/assets/js/11.65baf78c.js"><link rel="prefetch" href="/assets/js/12.6184a11a.js"><link rel="prefetch" href="/assets/js/13.ecad1206.js"><link rel="prefetch" href="/assets/js/14.2ca5bee8.js"><link rel="prefetch" href="/assets/js/15.5a69d0d8.js"><link rel="prefetch" href="/assets/js/17.bf197a83.js"><link rel="prefetch" href="/assets/js/18.b87cd0b0.js"><link rel="prefetch" href="/assets/js/19.3f4a2a15.js"><link rel="prefetch" href="/assets/js/20.8c81acb8.js"><link rel="prefetch" href="/assets/js/21.1ad225ee.js"><link rel="prefetch" href="/assets/js/22.c8c90166.js"><link rel="prefetch" href="/assets/js/23.28f79614.js"><link rel="prefetch" href="/assets/js/24.06c1ba33.js"><link rel="prefetch" href="/assets/js/25.20400a37.js"><link rel="prefetch" href="/assets/js/26.a91a516f.js"><link rel="prefetch" href="/assets/js/27.bea17ee7.js"><link rel="prefetch" href="/assets/js/28.0cca3d9f.js"><link rel="prefetch" href="/assets/js/29.94bd9c22.js"><link rel="prefetch" href="/assets/js/3.9185f555.js"><link rel="prefetch" href="/assets/js/30.92ee1734.js"><link rel="prefetch" href="/assets/js/4.90120916.js"><link rel="prefetch" href="/assets/js/5.2c2483a0.js"><link rel="prefetch" href="/assets/js/6.f336762c.js"><link rel="prefetch" href="/assets/js/7.b0ec8caa.js"><link rel="prefetch" href="/assets/js/8.e6ea42ae.js"><link rel="prefetch" href="/assets/js/9.db2267c3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4fd8ad1c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="MyBatis Mapper" class="logo"> <span class="site-name can-hide">MyBatis Mapper</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/1.getting-started.html" class="nav-link">
  快速上手
</a></div><div class="nav-item"><a href="/docs/extend/1.extend-guide.html" class="nav-link">
  深度指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="发布版本" class="dropdown-title"><span class="title">发布版本</span> <span class="arrow down"></span></button> <button type="button" aria-label="发布版本" class="mobile-dropdown-title"><span class="title">发布版本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/releases/1.0.0.html" class="nav-link">
  1.0.0
</a></li><li class="dropdown-item"><!----> <a href="/releases/1.0.1.html" class="nav-link">
  1.0.1
</a></li><li class="dropdown-item"><!----> <a href="/releases/1.0.3.html" class="nav-link">
  1.0.3
</a></li><li class="dropdown-item"><!----> <a href="/releases/1.0.4.html" class="nav-link">
  1.0.4
</a></li><li class="dropdown-item"><!----> <a href="/releases/1.1.0.html" class="nav-link">
  1.1.0
</a></li><li class="dropdown-item"><!----> <a href="/releases/1.2.0.html" class="nav-link">
  1.2.0
</a></li><li class="dropdown-item"><!----> <a href="/releases/1.2.x.html" class="nav-link">
  1.2.x
</a></li><li class="dropdown-item"><!----> <a href="/releases/2.0.0.html" class="nav-link">
  2.0.0
</a></li><li class="dropdown-item"><!----> <a href="/releases/2.1.0.html" class="nav-link">
  2.1.0
</a></li><li class="dropdown-item"><!----> <a href="/releases/2.1.1.html" class="nav-link">
  2.1.1
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/mybatis-mapper/mapper" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://gitee.com/mybatis-mapper/mapper" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Provider" class="dropdown-title"><span class="title">Provider</span> <span class="arrow down"></span></button> <button type="button" aria-label="Provider" class="mobile-dropdown-title"><span class="title">Provider</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/mybatis-mapper/provider" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/mybatis-mapper/provider" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://liuzh.blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  作者博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/1.getting-started.html" class="nav-link">
  快速上手
</a></div><div class="nav-item"><a href="/docs/extend/1.extend-guide.html" class="nav-link">
  深度指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="发布版本" class="dropdown-title"><span class="title">发布版本</span> <span class="arrow down"></span></button> <button type="button" aria-label="发布版本" class="mobile-dropdown-title"><span class="title">发布版本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/releases/1.0.0.html" class="nav-link">
  1.0.0
</a></li><li class="dropdown-item"><!----> <a href="/releases/1.0.1.html" class="nav-link">
  1.0.1
</a></li><li class="dropdown-item"><!----> <a href="/releases/1.0.3.html" class="nav-link">
  1.0.3
</a></li><li class="dropdown-item"><!----> <a href="/releases/1.0.4.html" class="nav-link">
  1.0.4
</a></li><li class="dropdown-item"><!----> <a href="/releases/1.1.0.html" class="nav-link">
  1.1.0
</a></li><li class="dropdown-item"><!----> <a href="/releases/1.2.0.html" class="nav-link">
  1.2.0
</a></li><li class="dropdown-item"><!----> <a href="/releases/1.2.x.html" class="nav-link">
  1.2.x
</a></li><li class="dropdown-item"><!----> <a href="/releases/2.0.0.html" class="nav-link">
  2.0.0
</a></li><li class="dropdown-item"><!----> <a href="/releases/2.1.0.html" class="nav-link">
  2.1.0
</a></li><li class="dropdown-item"><!----> <a href="/releases/2.1.1.html" class="nav-link">
  2.1.1
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/mybatis-mapper/mapper" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://gitee.com/mybatis-mapper/mapper" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Provider" class="dropdown-title"><span class="title">Provider</span> <span class="arrow down"></span></button> <button type="button" aria-label="Provider" class="mobile-dropdown-title"><span class="title">Provider</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/mybatis-mapper/provider" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/mybatis-mapper/provider" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://liuzh.blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  作者博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>使用指南</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/1.getting-started.html" class="sidebar-link">1.快速上手</a></li><li><a href="/docs/2.mybatis-mapper.html" class="sidebar-link">2. Mapper 接口</a></li><li><a href="/docs/3.entity.html" class="sidebar-link">3. 实体类注解</a></li><li><a href="/docs/4.common.html" class="sidebar-link">4. common 模块</a></li><li><a href="/docs/5.service.html" class="sidebar-link">5. service 模块</a></li><li><a href="/docs/6.activerecord.html" class="sidebar-link">6. activerecord 模块</a></li><li><a href="/docs/7.generator.html" aria-current="page" class="active sidebar-link">7. 睿Rui - 代码生成器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/7.generator.html#_7-1-项目文件简介" class="sidebar-link">7.1 项目文件简介</a></li><li class="sidebar-sub-header"><a href="/docs/7.generator.html#_7-2-代码生成器配置-project-yaml" class="sidebar-link">7.2 代码生成器配置 project.yaml</a></li><li class="sidebar-sub-header"><a href="/docs/7.generator.html#_7-3-模板文件介绍" class="sidebar-link">7.3 模板文件介绍</a></li><li class="sidebar-sub-header"><a href="/docs/7.generator.html#_7-4-env-和-sys-可选值-使用示例" class="sidebar-link">7.4 ENV 和 SYS 可选值，使用示例</a></li><li class="sidebar-sub-header"><a href="/docs/7.generator.html#_7-5-代码生成器-rui-cli-jar" class="sidebar-link">7.5 代码生成器 rui-cli.jar</a></li><li class="sidebar-sub-header"><a href="/docs/7.generator.html#_7-6-使用文档" class="sidebar-link">7.6 使用文档</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/7.generator.html#_7-6-1-配置适配" class="sidebar-link">7.6.1 配置适配</a></li><li class="sidebar-sub-header"><a href="/docs/7.generator.html#_7-6-2-执行代码生成器" class="sidebar-link">7.6.2 执行代码生成器</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/7.generator.html#_7-7-总结" class="sidebar-link">7.7 总结</a></li></ul></li><li><a href="/docs/8.jpa.html" class="sidebar-link">8. JPA 注解支持</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>示例</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>深度指南</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>本项目直接使用了一个功能强大的代码生成器 <code>睿Rui</code>，这个代码生成器可以设置项目的目录结构和具体的代码模板，
可以方便的从零生成一个完整的项目，也可以在已有项目结构中生成指定的代码文件。</p> <h2 id="_7-1-项目文件简介"><a href="#_7-1-项目文件简介" class="header-anchor">#</a> 7.1 项目文件简介</h2> <p>所有内容都在 <code>src/main/resources</code> 下面：</p> <ul><li><code>lib</code> 目录，代码生成器和数据库驱动 jar 包放到该目录下
<ul><li><code>mysql-connector-java-5.1.49.jar</code> MySQL驱动，当前只提供了MySQL驱动，
自己可以替换版本，连接其他数据库时，将对应的驱动放到当前 lib 目录下，
你可以把自己常用的各种数据库驱动都放在这里。</li> <li><code>rui-cli.jar</code> 代码生成器</li></ul></li> <li><code>mapper-templates</code> 模板文件
<ul><li><code>model.java</code>  普通的实体类模板</li> <li><code>model-lombok.java</code> 使用 lombok 注解的实体类模板</li> <li><code>mapper.java</code> Mapper 接口模板</li> <li><code>mapper.xml</code> Mapper XML 模板</li> <li><code>service.java</code> Service 接口模板</li> <li><code>serviceImpl.java</code> Service 接口实现模板</li></ul></li> <li><code>project.yaml</code> 代码生成器配置文件</li></ul> <p>这部分内容需要下载使用，为了方便使用，提供一个压缩包直接下载使用（最新模板从当前项目下载）。</p> <blockquote><p><strong>百度网盘</strong><br>
链接：https://pan.baidu.com/s/1uyROE1dgvrp8h-yGG3rR6Q<br>
提取码：an7g</p> <p>数据库驱动部分提供一些链接，可以根据需要进行下载：</p> <ul><li><a href="https://mvnrepository.com/artifact/mysql/mysql-connector-java" target="_blank" rel="noopener noreferrer">MySQL Connector/J<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mvnrepository.com/artifact/org.mariadb.jdbc/mariadb-java-client" target="_blank" rel="noopener noreferrer">MariaDB Java Client<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mvnrepository.com/artifact/org.postgresql/postgresql" target="_blank" rel="noopener noreferrer">PostgreSQL JDBC Driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mvnrepository.com/artifact/com.microsoft.sqlserver/mssql-jdbc" target="_blank" rel="noopener noreferrer">Microsoft JDBC Driver For SQL Server<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mvnrepository.com/artifact/net.sourceforge.jtds/jtds" target="_blank" rel="noopener noreferrer">JTDS for Microsoft SQL Server<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mvnrepository.com/artifact/com.oracle.database.jdbc/ojdbc10" target="_blank" rel="noopener noreferrer">Oracle JDBC Driver - Ojdbc10<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mvnrepository.com/artifact/org.xerial/sqlite-jdbc" target="_blank" rel="noopener noreferrer">SQLite JDBC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mvnrepository.com/artifact/org.apache.derby/derbyclient" target="_blank" rel="noopener noreferrer">Apache Derby Client JDBC Driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mvnrepository.com/artifact/ru.yandex.clickhouse/clickhouse-jdbc" target="_blank" rel="noopener noreferrer">ClickHouse JDBC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mvnrepository.com/artifact/com.ibm.db2/jcc" target="_blank" rel="noopener noreferrer">DB2 - IBM Data Server Driver For JDBC and SQLJ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mvnrepository.com/artifact/com.informix/informix-driver" target="_blank" rel="noopener noreferrer">Informix Driver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></blockquote> <h2 id="_7-2-代码生成器配置-project-yaml"><a href="#_7-2-代码生成器配置-project-yaml" class="header-anchor">#</a> 7.2 代码生成器配置 project.yaml</h2> <p>下面通过注释介绍每一项配置的含义或者作用：</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># 模板的名字，生成代码的根目录名称</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> mybatis<span class="token punctuation">-</span>mapper<span class="token punctuation">-</span>demo
<span class="token comment"># 代码生成的路径，可以使用 SYS 和 ENV 等变量，具体包含的内容和运行环境有关</span>
<span class="token comment"># user.dir 为当前运行命令的目录，path 不设置时的默认值也是当前路径</span>
<span class="token comment"># 当 path 路径以 .zip 后缀结尾时，会将生成的目录结构和代码放到压缩包中</span>
<span class="token comment">#【命令行】可以通过 —o 重新指定位置</span>
<span class="token key atrule">path</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>SYS<span class="token punctuation">[</span><span class="token string">'user.dir'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>/
<span class="token comment"># 模板文件所在路径，默认为相对 path 所在的位置，不设置时和 path 相同</span>
<span class="token comment">#【命令行】可以通过 —T 重新指定位置</span>
<span class="token key atrule">templates</span><span class="token punctuation">:</span> mapper<span class="token punctuation">-</span>templates
<span class="token comment"># 数据库配置</span>
<span class="token key atrule">database</span><span class="token punctuation">:</span> 
  <span class="token comment"># 数据库连接配置</span>
  <span class="token key atrule">jdbcConnection</span><span class="token punctuation">:</span>
    <span class="token comment"># 使用方言，默认为 JDBC 方式，可能会取不到表或字段注释</span>
    <span class="token comment"># 后续介绍如何通过字典匹配注释值</span>
    <span class="token comment">#【命令行】可以通过 --jdbc.dialect 覆盖</span>
    <span class="token key atrule">dialect</span><span class="token punctuation">:</span> MYSQL
    <span class="token comment"># jdbc驱动</span>
    <span class="token comment">#【命令行】可以通过 --jdbc.driver 覆盖</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> com.mysql.jdbc.Driver
    <span class="token comment"># jdbc连接地址</span>
    <span class="token comment">#【命令行】可以通过 --jdbc.url 覆盖</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/test<span class="token punctuation">?</span>useSSL=false
    <span class="token comment"># 用户名</span>
    <span class="token comment">#【命令行】可以通过 --jdbc.user 覆盖</span>
    <span class="token key atrule">user</span><span class="token punctuation">:</span> root
    <span class="token comment"># 密码</span>
    <span class="token comment">#【命令行】可以通过 --jdbc.password 覆盖</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span> root
  <span class="token comment"># 获取表配置，支持 % 和 _ 模糊匹配，可以配置多个值  </span>
  <span class="token comment"># 还有一个支持复杂规则 tableRules 属性后续单独介绍</span>
  <span class="token comment">#【命令行】可以通过 -t table1,table2 覆盖</span>
  <span class="token key atrule">tables</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">'%'</span>
  <span class="token comment"># 根据类型对字段类型打标签, 可以通过 column.tags.TAG 的 true/false 来判断当前列是否有该标签</span>
  <span class="token comment"># 主要对列进行分类，方便后续模板中的使用</span>
  <span class="token key atrule">typeTags</span><span class="token punctuation">:</span>
    <span class="token comment"># 示例，针对日期时间设置 jdbcType 标签，生成的代码中，如果有该标签，会指定 jdbcType 的值</span>
    <span class="token key atrule">jdbcType</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> DATE
      <span class="token punctuation">-</span> TIME
      <span class="token punctuation">-</span> TIMESTAMP
  <span class="token comment"># 关键字包装，这里的示例针对 MySQL，不提供默认值，需要根据数据库语法进行设置，其中的 %s 为关键字（表名或列名）</span>
  <span class="token key atrule">keywordWrap</span><span class="token punctuation">:</span> <span class="token string">&quot;`%s`&quot;</span>
  <span class="token comment"># 数据库关键字，列举的关键字会进行包装处理，没有默认值，需要自己配置所有可能的关键字</span>
  <span class="token key atrule">keywords</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> order
    <span class="token punctuation">-</span> desc
<span class="token comment"># 附加属性</span>
<span class="token comment">#【命令行】可以通过 -AbasePackage=com.company 覆盖或增加新属性</span>
<span class="token key atrule">attrs</span><span class="token punctuation">:</span> <span class="token comment"># 子目录（文件）可以通过 parent.parent...attrs.属性名 可以逐级向上使用属性</span>
  <span class="token comment"># 这里设置了一个基础包名</span>
  <span class="token key atrule">basePackage</span><span class="token punctuation">:</span> io.mybatis.demo.mybatis
<span class="token comment"># 子目录（文件）</span>
<span class="token key atrule">files</span><span class="token punctuation">:</span>
  <span class="token comment"># 文件名，可以 / 设置多级目录</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> src/main
    <span class="token comment"># 子目录（文件）</span>
    <span class="token key atrule">files</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> java
        <span class="token key atrule">files</span><span class="token punctuation">:</span> 
          <span class="token comment"># 包，可以多层，名称可以引用当前结构的所有属性，也可以使用 tables 数据表信息</span>
          <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'${project.attrs.basePackage}'</span>
            <span class="token comment"># 设置类型为 package，尽可能都指定，默认会计算，默认为目录。包下面的默认都是包</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> PACKAGE
            <span class="token key atrule">files</span><span class="token punctuation">:</span>
              <span class="token comment"># 包名</span>
              <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> mapper
                <span class="token key atrule">files</span><span class="token punctuation">:</span>
                  <span class="token comment"># 模板文件，下面 iter 对 tables 所有表进行迭代，因此这里的模板会根据表的数量进行循环生成</span>
                  <span class="token comment"># 迭代循环时，单个迭代对象的默认名为 it，因此这里的 name 就是表名（类名形式）为前缀的 Mapper 接口</span>
                  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'${it.name.className}Mapper.java'</span>
                    <span class="token comment"># 使用的模板名，会从上面配置的 templates 下面查找</span>
                    <span class="token comment"># 包含多级目录时，这里可以指定相对 templates 的路径</span>
                    <span class="token key atrule">file</span><span class="token punctuation">:</span> mapper.java
                    <span class="token comment"># 可选配置 iter, 迭代的数据对象，当前可选为 tables 为反射的数据库表信息</span>
                    <span class="token comment"># iter 值使用 mvel 表达式取值，除 tables 外也可以对当前 yaml 中的集合类型进行迭代，例如 project.files</span>
                    <span class="token key atrule">iter</span><span class="token punctuation">:</span> tables
                    <span class="token comment"># 可选配置 iterName，默认值为 it，在模板和上面的 name 中可以使用改变量的值</span>
                    <span class="token comment"># iterName: it</span>
                    <span class="token comment"># 可选配置 filter, 绑定数据过滤器，使用 mvel 表达式，过滤条件不满足时不执行当前的操作，不生成相应的目录或文件</span>
                    <span class="token comment"># filter: tables.size() &gt; 0 # 仅仅是示例，size=0时本身也不会循环</span>
                    <span class="token comment"># 可选配置 itFilter，迭代数据过滤器，使用 mvel 表达式，当指定 iter 时，对迭代的数据进行过滤</span>
                    <span class="token comment"># 不满足条件时，只忽略当前的 it 数据，下面示例中当表名以 sys 为前缀时生成目录或代码</span>
                    <span class="token comment"># iterFilter: it.name.original.o.startsWith(&quot;sys&quot;)</span>
                    <span class="token comment"># 可选配置 enabled，默认 true，当前目录（文件）有效，会生成，设置为 false 时忽略</span>
                    <span class="token comment"># enabled: true</span>
                    <span class="token comment"># 可选配置 mode，默认值为 OVERRIDE，生成目录或文件时覆盖，可选值为:</span>
                    <span class="token comment"># OVERRIDE: 覆盖</span>
                    <span class="token comment"># ONCE: 只生成一次，或者如果目录或文件已存在时不生成(目录存在时，子文件也不会生成）</span>
                    <span class="token comment"># MERGE: 合并已存在的文件和新生成的文件，需要满足规则才能合并</span>
                    <span class="token comment"># mode: OVERRIDE</span>
                    <span class="token comment"># 可选配置 times，默认值 1，默认情况下，模板只经过一次变量替换，有时存在多层变量嵌套时，执行多次才能全部替换</span>
                    <span class="token comment"># times: 1</span>
              <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> model
                <span class="token key atrule">files</span><span class="token punctuation">:</span>
                  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'${it.name.className}.java'</span>
                    <span class="token comment"># 此处有2种模板示例，分别列出来加了注释</span>
                    <span class="token key atrule">file</span><span class="token punctuation">:</span> model.java
<span class="token comment">#                    file: model-lombok.java</span>
                    <span class="token key atrule">iter</span><span class="token punctuation">:</span> tables
              <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> service
                <span class="token key atrule">files</span><span class="token punctuation">:</span>
                  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'${it.name.className}Service.java'</span>
                    <span class="token key atrule">file</span><span class="token punctuation">:</span> service.java
                    <span class="token key atrule">iter</span><span class="token punctuation">:</span> tables
                  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> impl
                    <span class="token key atrule">files</span><span class="token punctuation">:</span>
                      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'${it.name.className}ServiceImpl.java'</span>
                        <span class="token key atrule">file</span><span class="token punctuation">:</span> serviceImpl.java
                        <span class="token key atrule">iter</span><span class="token punctuation">:</span> tables
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> resources
        <span class="token key atrule">files</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> mappers
            <span class="token key atrule">files</span><span class="token punctuation">:</span>
              <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'${it.name.className}Mapper.xml'</span>
                <span class="token key atrule">iter</span><span class="token punctuation">:</span> tables
                <span class="token key atrule">file</span><span class="token punctuation">:</span> mapper.xml
</code></pre></div><p>在模板的 YAML 配置中，数据库相关的配置定义了生成代码的元数据，files 中的内容定义了项目的结构和生成代码的位置。</p> <p>变化比较多的配置是具体的一个 files 配置，下面是上面大段注释部分的整理，file 属性说明：</p> <ul><li><code>name: '${it.name.className}Mapper.java'</code>
模板文件，下面 iter 对 tables 所有表进行迭代，因此这里的模板会根据表的数量进行循环生成；
迭代循环时，单个迭代对象的默认名为 <code>it</code>，因此这里的 name 就是表名（类名形式）为前缀的 Mapper 接口。</li> <li><code>file: mapper.java</code> 使用的模板名，会从上面配置的 templates 下面查找;
包含多级目录时，这里可以指定相对 templates 的路径。</li> <li><code>iter: tables</code>: 可选配置 iter, 迭代的数据对象，当前可选为 tables 为反射的数据库表信息；
iter 值使用 mvel 表达式取值，除 tables 外也可以对当前 yaml 中的集合类型进行迭代，例如 project.files。</li> <li><code>iterName: it</code>
可选配置 iterName，默认值为 it，在模板和上面的 name 中可以使用改变量的值。</li> <li><code>filter: tables.size() &gt; 0</code> 可选配置 filter, 绑定数据过滤器，使用 mvel 表达式，过滤条件不满足时不执行当前的操作，不生成相应的目录或文件。</li> <li><code>iterFilter: it.name.original.o.startsWith(&quot;sys&quot;)</code>
可选配置 itFilter，迭代数据过滤器，使用 mvel 表达式，当指定 iter 时，对迭代的数据进行过滤；
不满足条件时，只忽略当前的 it 数据，下面示例中当表名以 sys 为前缀时生成目录或代码。</li> <li><code>enabled: true</code> 可选配置 enabled，默认 true，当前目录（文件）有效，会生成，设置为 false 时忽略。</li> <li><code>mode: OVERRIDE</code> 可选配置 mode，默认值为 OVERRIDE，生成目录或文件时覆盖，可选值为:
<ul><li><code>OVERRIDE</code>: 覆盖，默认值</li> <li><code>ONCE</code>: 只生成一次，或者如果目录或文件已存在时不生成(目录存在时，子文件也不会生成）</li> <li><code>MERGE</code>: 合并已存在的文件和新生成的文件，需要满足规则才能合并</li></ul></li> <li><code>times: 1</code> 可选配置 times，默认值 1，默认情况下，模板只经过一次变量替换，有时存在多层变量嵌套时，执行多次才能全部替换</li></ul> <blockquote><p>上面示例中的 <code>iterFilter: it.name.original.o.startsWith(&quot;sys&quot;)</code> 中的 <code>it.name.original.o</code> 很奇怪，下面模板介绍为什么会这么写。</p></blockquote> <h2 id="_7-3-模板文件介绍"><a href="#_7-3-模板文件介绍" class="header-anchor">#</a> 7.3 模板文件介绍</h2> <p>目前代码模板使用 <code>FreeMarker</code> 模板引擎，点击查看 <a href="http://www.kerneler.com/freemarker2.3.23/ref.html" target="_blank" rel="noopener noreferrer">模板语言参考文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>针对 model 提供了 2 套模板：</p> <ul><li><code>model.java</code>  普通的实体类模板</li> <li><code>model-lombok.java</code> 使用 lombok 注解的实体类模板</li></ul> <p>修改配置文件下面的地方选择想要使用的文档：</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># 在 model 包下面</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> model
  <span class="token key atrule">files</span><span class="token punctuation">:</span>
    <span class="token comment"># 有实体类代码，类名为表名的类形式</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'${it.name.className}.java'</span>
      <span class="token comment"># 此处有2种模板示例，具体类型看上面介绍</span>
      <span class="token key atrule">file</span><span class="token punctuation">:</span> model.java
      <span class="token comment"># file: model-lombok.java</span>
      <span class="token key atrule">iter</span><span class="token punctuation">:</span> tables
</code></pre></div><p>当使用 lombok 版本的模板时，实体类使用了 <code>@Getter</code> 和 <code>@Setter</code> 注解，代码体中就不需要生成 getter 和 setter 的代码。
如果你想使用 lombok 的 <code>@Data</code> 或其他注解，你可以实现自己的模板（注意 <code>import</code> 相应的类型）。</p> <h2 id="_7-4-env-和-sys-可选值-使用示例"><a href="#_7-4-env-和-sys-可选值-使用示例" class="header-anchor">#</a> 7.4 ENV 和 SYS 可选值，使用示例</h2> <p>代码生成器配置和模板中都可以使用 ENV 和 SYS 变量，这些变量和运行的环境有关，
代码生成器运行时会输出当前环境的这些信息，想要修改为某些值时可以运行之后查找想要使用的名字。
例如下面展示的<strong>部分内容</strong>（示例为 macOS）：</p> <div class="language- extra-class"><pre class="language-text"><code>[main] TRACE Project - SYS可用参数:
[main] TRACE Project - SYS['user.country'] = CN
[main] TRACE Project - SYS['user.home'] = /Users/liuzh
[main] TRACE Project - SYS['user.dir'] = /Users/liuzh/IdeaProjects/rui/core

[main] TRACE Project - ENV可用参数:
[main] TRACE Project - ENV['USER'] = liuzh
[main] TRACE Project - ENV['PWD'] = /Users/liuzh/IdeaProjects/rui/core
[main] TRACE Project - ENV['HOME'] = /Users/liuzh
</code></pre></div><p>在模板中使用时，直接参考上面的写法，例如 <code>${SYS['user.home']}</code> 和 <code>${ENV['HOME']}</code>。</p> <h2 id="_7-5-代码生成器-rui-cli-jar"><a href="#_7-5-代码生成器-rui-cli-jar" class="header-anchor">#</a> 7.5 代码生成器 rui-cli.jar</h2> <p>代码生成器提供了一个可执行 jar 文件: rui-cli.jar</p> <blockquote><p>后续会提供基于 java swing 的 GUI 客户端，可以通过 UI 简单操作生成代码。</p></blockquote> <p>可执行 jar 文件使用方式：</p> <div class="language- extra-class"><pre class="language-text"><code>用法: java -cp &quot;lib/*&quot; io.mybatis.rui.cli.Main [options]
  Options:
    -p, --project
      代码生成器YAML配置文件
    -o, --output
      输出目录，默认使用配置文件中的 path，输出目录如果带 .zip 后缀，就会将生成的代码导出为压缩包
    -T, --templates
      模板文件路径，默认和YAML相同位置，或者为当前执行目录的相对位置
    --jdbc.dialect
      数据库方言
      Possible Values: [JDBC, HSQLDB, ORACLE, DB2, SQLSERVER, MARIADB, MYSQL]
    --jdbc.driver
      数据库驱动
    --jdbc.url
      数据库URL
    --jdbc.user
      数据库用户
    --jdbc.password
      数据库密码
    -t, --tables
      要获取的表名，支持模糊匹配(%)，多个表名用逗号隔开，指定该值后会覆盖配置文件中的值
    -A, -attrs
      项目附加属性，会覆盖项目下的 attrs 配置
      Syntax: -Akey=value
      Default: {}
    -h, --help
      显示帮助信息
</code></pre></div><p>在上面命令中，推荐 <code>-cp lib/*</code> 使用 lib 目录下面的所有 jar 包，这样当你需要不同的数据库驱动时，
将 JDBC 驱动放到该目录下面即可。</p> <p>下面演示代码生成器的使用过程。</p> <h2 id="_7-6-使用文档"><a href="#_7-6-使用文档" class="header-anchor">#</a> 7.6 使用文档</h2> <p>上面介绍了部分代码生成器的细节，最关键的内容是项目结构和代码模板，
这两部分内容需要理解上面的内容后，根据自己的项目进行设计和模板编写，
一旦编写好，只要项目结构和模板内容不变，这套模板就可以一直使用，
后续变化的地方就是 JDBC连接配置，指定要连的数据库和要获取的表信息，
因此除了代码生成器的初始配置和模板有一点难度外，后续的使用是非常简单的。</p> <p>接下来我们以当前项目提供的模板为基础，介绍一下如果想应用到自己的项目，该如何修改配置，修改完配置之后如何生成项目结构和代码。</p> <h3 id="_7-6-1-配置适配"><a href="#_7-6-1-配置适配" class="header-anchor">#</a> 7.6.1 配置适配</h3> <h4 id="_7-6-1-1-生成代码的目录"><a href="#_7-6-1-1-生成代码的目录" class="header-anchor">#</a> 7.6.1.1 生成代码的目录</h4> <p>在 <code>project.yaml</code> 中，<code>path</code> 定义了项目所在的路径（不含项目名），
示例中使用了默认值（不配置时也是改值）<code>${SYS['user.dir']}/</code>，
这个目录和执行代码生成器命令时所在的目录一样，如果是第一次生成项目，
生成到当前目录也没有问题，如果是已经存在的项目，
就需要修改路径让代码可以直接生成到已有项目的目录结构中。</p> <p><strong>假设项目为 d:/idea-project/cms</strong>，cms 是项目名，此时的配置如下：</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># 项目名，和真实的 cms 名字对应</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> cms
<span class="token comment"># 项目所在路径</span>
<span class="token key atrule">path</span><span class="token punctuation">:</span> d<span class="token punctuation">:</span>/idea<span class="token punctuation">-</span>project/
</code></pre></div><h4 id="_7-6-1-2-数据库配置"><a href="#_7-6-1-2-数据库配置" class="header-anchor">#</a> 7.6.1.2 数据库配置</h4> <p>数据库连接的配置按照示例修改即可，平时使用时，最常见的变化时 <code>tables</code> 的值。</p> <p>如果后续生成代码时不想重新生成已存在表的代码，就需要每次指定要生成的表的信息。</p> <p>例如第一次的时候生成了所有 <code>sys_user</code>, <code>sys_role</code> 等 <code>sys</code> 开头的表，此时可以配置为：</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">tables</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> sys%
</code></pre></div><p>假设后续要生成某几个表的，可以配置为具体的表名：</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">tables</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> account
  <span class="token punctuation">-</span> content
  <span class="token punctuation">-</span> comments
</code></pre></div><p>表名可以写多个，而且每个都可以是具体表名，也可以使用模糊匹配，使用 <code>%</code> 匹配任意个字符，使用 <code>_</code> 匹配单个字符。</p> <h4 id="_7-6-1-3-包名修改"><a href="#_7-6-1-3-包名修改" class="header-anchor">#</a> 7.6.1.3 包名修改</h4> <p>示例中为了展示 <code>attrs</code> 属性的用法，因此在这里配置了一个 <code>basePackage</code> 属性，这个属性在下面的包名 <code>name</code> 使用了，
根据自己的包名修改这里，例如：<code>com.company.cms</code>，如果你的包和这里结构不一样，可以自己调整 <code>files</code> 适配自己的结构。</p> <h4 id="_7-6-1-4-类名规则"><a href="#_7-6-1-4-类名规则" class="header-anchor">#</a> 7.6.1.4 类名规则</h4> <p>在 mapper 包下面循环生成了每个表对应的 Mapper 接口，这里定义的名称为 <code>'${it.name.className}Mapper.java'</code>，
<code>表的类名</code>+<code>Mapper</code> 后缀作为接口名，如果你喜欢使用 <code>Dao</code> 后缀，就可以改为 <code>'${it.name.className}Dao.java'</code>，
还需要注意修改所有使用（注入）该接口的地址，例如在 <code>serviceImpl.java</code> 模板中：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//省略其他</span>
<span class="token keyword">import</span> $<span class="token punctuation">{</span>project<span class="token punctuation">.</span>attrs<span class="token punctuation">.</span>basePackage<span class="token punctuation">}</span><span class="token punctuation">.</span>mapper<span class="token punctuation">.</span>$<span class="token punctuation">{</span>it<span class="token punctuation">.</span>name<span class="token punctuation">.</span>className<span class="token punctuation">}</span><span class="token class-name">Dao</span><span class="token punctuation">;</span>
<span class="token comment">//省略其他</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span>  $<span class="token punctuation">{</span>it<span class="token punctuation">.</span>name<span class="token punctuation">.</span>className<span class="token punctuation">}</span><span class="token class-name">ServiceImpl</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractService</span><span class="token operator">&lt;</span>$<span class="token punctuation">{</span>it<span class="token punctuation">.</span>name<span class="token punctuation">.</span>className<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">,</span> $<span class="token punctuation">{</span>it<span class="token punctuation">.</span>name<span class="token punctuation">.</span>className<span class="token punctuation">}</span><span class="token class-name">Dao</span><span class="token operator">&gt;</span> <span class="token keyword">implements</span> $<span class="token punctuation">{</span>it<span class="token punctuation">.</span>name<span class="token punctuation">.</span>className<span class="token punctuation">}</span><span class="token class-name">Service</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><p>只要保证模板内容和类型定义保持一致即可。</p> <h3 id="_7-6-2-执行代码生成器"><a href="#_7-6-2-执行代码生成器" class="header-anchor">#</a> 7.6.2 执行代码生成器</h3> <p>配置完成后，使用下面的命令生成代码：</p> <div class="language-java extra-class"><pre class="language-java"><code>java <span class="token operator">-</span>cp <span class="token string">&quot;lib/*&quot;</span> <span class="token class-name"><span class="token namespace">io<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>rui<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>Main</span> <span class="token operator">-</span>p project<span class="token punctuation">.</span>yaml
</code></pre></div><blockquote><p><strong>由于写此文档时使用的 macOS，因此下面的日志文件和这里预设的目录结构不同，后续更新为目录一致的输出</strong></p></blockquote> <p>执行命令后，输出日志如下：</p> <div class="language- extra-class"><pre class="language-text"><code>[main] TRACE Project - SYS可用参数:
[main] TRACE Project - SYS['gopherProxySet'] = false
#-----------------省略大量 SYS 属性-----------------------
[main] TRACE Project - SYS['http.proxyPort'] = 8889
[main] TRACE Project - ENV可用参数:
[main] TRACE Project - ENV['JAVA_ARCH'] = x86_64
#-----------------省略大量 ENV 属性-----------------------
[main] TRACE Project - ENV['_'] = /usr/bin/java
[main] DEBUG Project - 执行程序路径: /Users/liuzh/IdeaProjects/generator-cmd
[main] DEBUG Project - basedir变量: /Users/liuzh/IdeaProjects/generator-cmd
[main] DEBUG Project - yamlDir变量: /Users/liuzh/IdeaProjects/generator-cmd
[main] DEBUG Database - 获取数据库信息
[2021-05-30 17:40:37] [DEBUG] rui.pJ: Use [Hutool Console Logging] Logger As Default.
[main] DEBUG Database - 获取表: role
[main] TRACE Database - 记录列: id
[main] TRACE Database - 记录列: role_name
[main] DEBUG Database - 获取表: user
[main] TRACE Database - 记录列: id
[main] TRACE Database - 记录列: user_name
[main] TRACE Database - 记录列: user_age
[main] TRACE Database - 记录列: address
[main] DEBUG Database - 获取表: user_role
[main] TRACE Database - 记录列: id
[main] TRACE Database - 记录列: user_id
[main] TRACE Database - 记录列: role_id
[main] DEBUG Database - 通过 SQL 获取表的注释信息
[main] DEBUG Database - 执行 SQL: SELECT TABLE_NAME, TABLE_COMMENT FROM information_schema.TABLES WHERE TABLE_SCHEMA = 'test' AND TABLE_NAME in ( 'user_role','role','user' )
[main] DEBUG Database - 表: role - 角色
[main] DEBUG Database - 表: user - 用户
[main] DEBUG Database - 表: user_role - 用户和角色关联
[main] DEBUG Context - 生成项目路径: /Users/liuzh/IdeaProjects/
[main] DEBUG Context - 读取模板路径: mapper-templates
[main] DEBUG Generator - 已存在目录: /Users/liuzh/IdeaProjects/cms
[main] DEBUG Generator - 已存在目录: /Users/liuzh/IdeaProjects/cms/src/main
[main] DEBUG Generator - 已存在目录: /Users/liuzh/IdeaProjects/cms/src/main/java
[main] DEBUG Generator - 已存在包: io.mybatis.demo.mybatis
[main] DEBUG Generator - 已存在包: mapper
[main] DEBUG Generator - 初次创建文件: RoleMapper.java
[main] DEBUG Generator - 初次创建文件: UserMapper.java
[main] DEBUG Generator - 初次创建文件: UserRoleMapper.java
[main] DEBUG Generator - 已存在包: model
[main] DEBUG Generator - 初次创建文件: Role.java
[main] DEBUG Generator - 初次创建文件: User.java
[main] DEBUG Generator - 初次创建文件: UserRole.java
[main] DEBUG Generator - 已存在包: service
[main] DEBUG Generator - 初次创建文件: RoleService.java
[main] DEBUG Generator - 初次创建文件: UserService.java
[main] DEBUG Generator - 初次创建文件: UserRoleService.java
[main] DEBUG Generator - 已存在包: impl
[main] DEBUG Generator - 初次创建文件: RoleServiceImpl.java
[main] DEBUG Generator - 初次创建文件: UserServiceImpl.java
[main] DEBUG Generator - 初次创建文件: UserRoleServiceImpl.java
[main] DEBUG Generator - 已存在目录: /Users/liuzh/IdeaProjects/cms/src/main/resources
[main] DEBUG Generator - 已存在目录: /Users/liuzh/IdeaProjects/cms/src/main/resources/mappers
[main] DEBUG Generator - 初次创建文件: RoleMapper.xml
[main] DEBUG Generator - 初次创建文件: UserMapper.xml
[main] DEBUG Generator - 初次创建文件: UserRoleMapper.xml
</code></pre></div><p>rui-cli.jar 中包含了多个可以覆盖默认配置的参数，大部分参数仍然建议在配置文件中指定。</p> <p>如果想要生成的代码导出为 ZIP 压缩包，只需要在上面的命令后面增加 <code>-o cms.zip</code> 即可在执行的目录中生成一个 <code>cms.zip</code> 压缩包文件：</p> <div class="language-java extra-class"><pre class="language-java"><code>java <span class="token operator">-</span>cp <span class="token string">&quot;lib/*&quot;</span> <span class="token class-name"><span class="token namespace">io<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>rui<span class="token punctuation">.</span>cli<span class="token punctuation">.</span></span>Main</span> <span class="token operator">-</span>p project<span class="token punctuation">.</span>yaml <span class="token operator">-</span>o cms<span class="token punctuation">.</span>zip
</code></pre></div><p>执行命令后，最终生成 <code>cms.zip</code> 文件，文件结构如下：</p> <div class="language- extra-class"><pre class="language-text"><code>$ unzip -v cms.zip 
Archive:  cms.zip
 Length   Method    Size  Cmpr    Date    Time   CRC-32   Name
--------  ------  ------- ---- ---------- ----- --------  ----
       0  Defl:N        2   0% 05-30-2021 18:17 00000000  cms/
       0  Defl:N        2   0% 05-30-2021 18:17 00000000  cms/src/
       0  Defl:N        2   0% 05-30-2021 18:17 00000000  cms/src/main/
       0  Defl:N        2   0% 05-30-2021 18:17 00000000  cms/src/main/java/
       0  Defl:N        2   0% 05-30-2021 18:17 00000000  cms/src/main/java/io/
       0  Defl:N        2   0% 05-30-2021 18:17 00000000  cms/src/main/java/io/mybatis/
       0  Defl:N        2   0% 05-30-2021 18:17 00000000  cms/src/main/java/io/mybatis/demo/
       0  Defl:N        2   0% 05-30-2021 18:17 00000000  cms/src/main/java/io/mybatis/demo/mybatis/
       0  Defl:N        2   0% 05-30-2021 18:17 00000000  cms/src/main/java/io/mybatis/demo/mybatis/mapper/
     177  Defl:N      135  24% 05-30-2021 18:17 bf55dc13  cms/src/main/java/io/mybatis/demo/mybatis/mapper/RoleMapper.java
     177  Defl:N      135  24% 05-30-2021 18:17 46655d51  cms/src/main/java/io/mybatis/demo/mybatis/mapper/UserMapper.java
     205  Defl:N      160  22% 05-30-2021 18:17 b161f496  cms/src/main/java/io/mybatis/demo/mybatis/mapper/UserRoleMapper.java
       0  Defl:N        2   0% 05-30-2021 18:17 00000000  cms/src/main/java/io/mybatis/demo/mybatis/model/
     991  Defl:N      438  56% 05-30-2021 18:17 a7ea4bb7  cms/src/main/java/io/mybatis/demo/mybatis/model/Role.java
    1679  Defl:N      581  65% 05-30-2021 18:17 1ef86c27  cms/src/main/java/io/mybatis/demo/mybatis/model/User.java
    1341  Defl:N      504  62% 05-30-2021 18:17 92c5bec1  cms/src/main/java/io/mybatis/demo/mybatis/model/UserRole.java
       0  Defl:N        2   0% 05-30-2021 18:17 00000000  cms/src/main/java/io/mybatis/demo/mybatis/service/
     235  Defl:N      153  35% 05-30-2021 18:17 efb596bd  cms/src/main/java/io/mybatis/demo/mybatis/service/RoleService.java
     235  Defl:N      153  35% 05-30-2021 18:17 59b608c0  cms/src/main/java/io/mybatis/demo/mybatis/service/UserService.java
     267  Defl:N      177  34% 05-30-2021 18:17 5121a031  cms/src/main/java/io/mybatis/demo/mybatis/service/UserRoleService.java
       0  Defl:N        2   0% 05-30-2021 18:17 00000000  cms/src/main/java/io/mybatis/demo/mybatis/service/impl/
     442  Defl:N      218  51% 05-30-2021 18:17 26c22e04  cms/src/main/java/io/mybatis/demo/mybatis/service/impl/RoleServiceImpl.java
     442  Defl:N      219  51% 05-30-2021 18:17 fdabfe3b  cms/src/main/java/io/mybatis/demo/mybatis/service/impl/UserServiceImpl.java
     490  Defl:N      247  50% 05-30-2021 18:17 742f3203  cms/src/main/java/io/mybatis/demo/mybatis/service/impl/UserRoleServiceImpl.java
       0  Defl:N        2   0% 05-30-2021 18:17 00000000  cms/src/main/resources/
       0  Defl:N        2   0% 05-30-2021 18:17 00000000  cms/src/main/resources/mappers/
     435  Defl:N      252  42% 05-30-2021 18:17 afff9e3d  cms/src/main/resources/mappers/RoleMapper.xml
     574  Defl:N      277  52% 05-30-2021 18:17 920e9299  cms/src/main/resources/mappers/UserMapper.xml
     505  Defl:N      253  50% 05-30-2021 18:17 ef08156b  cms/src/main/resources/mappers/UserRoleMapper.xml
--------          -------  ---                            -------
    8195             3930  52%                            29 files
</code></pre></div><p>其他参数可以自己尝试。</p> <h2 id="_7-7-总结"><a href="#_7-7-总结" class="header-anchor">#</a> 7.7 总结</h2> <p>睿Rui是一个非常灵活易用的代码生成器，包含的功能细节非常的多，本篇文档旨在入门，还有很多内容没有展示出来，后续会针对睿Rui提供一些进阶使用文档，后续的计划如下：</p> <ul><li>【文档】编写自己的代码模板</li> <li>【文档】项目结构和代码的配置</li> <li>【文档】tableRules 表名、列名特殊配置配置和字典设置</li> <li>【文档】MERGE 合并文件用法介绍</li> <li>【文档】使用 睿Rui 生成完整项目</li> <li>【直播】分享 睿Rui-cli 代码生成器配置和使用</li> <li>【文档】睿Rui-tpl 代码模板生成器的使用文档（生成代码生成器配置的工具）</li> <li>【直播】以比较火的某个框架作为示例使用 睿Rui-tpl</li> <li>【文档】睿Rui-gui 代码生成器GUI客户端使用说明</li> <li>【工具】睿Rui-idea-plugin IDEA插件，结合IDEA的datasource使用代码生成器</li> <li>【工具】睿Rui-SaaS 代码生成器发布，提供模板市场</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/mybatis-mapper/mapper-docs/edit/master/docs/7.generator.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">最后编辑时间:</span> <span class="time">8/11/2021, 2:57:21 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/6.activerecord.html" class="prev">
        6. activerecord 模块
      </a></span> <span class="next"><a href="/docs/8.jpa.html">
        8. JPA 注解支持
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.982d0a79.js" defer></script><script src="/assets/js/2.05c8fd45.js" defer></script><script src="/assets/js/16.3d121eed.js" defer></script>
  </body>
</html>
